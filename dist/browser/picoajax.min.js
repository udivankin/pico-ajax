var PicoAjax=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};var t={body:void 0,headers:{},username:void 0,password:void 0,timeout:void 0,async:!0,onProgress:null,responseType:"",withCredentials:void 0};function n(e,t){return Object.assign({},e,t)}var r=function(t){function n(e,n){var r=t.call(this,e)||this;return r.name="ReponseError",n&&(r.statusCode=n.statusCode,r.statusMessage=n.statusMessage,r.headers=n.headers,r.body=n.body),r}return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n}(Error),o=["arraybuffer","blob","document","json","text"];function s(e){var t=e.getAllResponseHeaders().split(/[\r\n]+/).filter(Boolean).reduce((function(e,t){var n=t.split(":").map((function(e){return(e||"").trim()}));return 2===n.length&&(e[n[0]]=n[1]),e}),{}),n=-1!==o.indexOf(e.responseType)?e.response:function(e){var t;try{t=JSON.parse(e)}catch(n){t=e}return t}(e.responseText);return{statusCode:e.status,statusMessage:e.statusText,headers:t,body:n}}function u(e,t,n){return new Promise((function(o,u){var a=new XMLHttpRequest;a.open(e,t,n.async);var i=n.onProgress,c=n.responseType,d=n.timeout,p=n.withCredentials;void 0!==c&&(a.responseType=n.responseType),void 0!==d&&(a.timeout=n.timeout),n.username&&n.password&&a.setRequestHeader("Authorization","Basic "+btoa(n.username+":"+n.password)),void 0!==p&&(a.withCredentials=n.withCredentials),Object.keys(n.headers).forEach((function(e){a.setRequestHeader(e,n.headers[e])})),a.send(n.body),"function"==typeof i&&a.addEventListener("progress",i.bind(a)),a.addEventListener("load",(function(){var e=s(a);200!==a.status?u(new r("["+a.status+"] "+a.responseText,e)):o(e)}))}))}return{get:function(e,r){return u("GET",e,n(t,r))},post:function(e,r){return u("POST",e,n(t,r))},put:function(e,r){return u("PUT",e,n(t,r))},delete:function(e,r){return u("DELETE",e,n(t,r))},head:function(e,r){return u("HEAD",e,n(t,r))},patch:function(e,r){return u("PATCH",e,n(t,r))},connect:function(e,r){return u("CONNECT",e,n(t,r))},options:function(e,r){return u("OPTIONS",e,n(t,r))}}}();
